<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Searchable Slides</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .slide {
            min-height: 80vh;
            display: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .slide.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .slide h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .slide p {
            font-size: 1.3rem;
            max-width: 800px;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        .slide-image {
            max-width: 400px;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin: 1rem 0;
        }
        .slide-controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }
        .slide-nav {
            background: rgba(255,255,255,0.9);
            border-radius: 50px;
            padding: 10px 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .search-btn {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        .search-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        .slide-indicator {
            position: fixed;
            top: 30px;
            left: 30px;
            z-index: 1000;
            background: rgba(255,255,255,0.9);
            border-radius: 25px;
            padding: 10px 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            color: #333;
            font-weight: 600;
        }
        .modal-content {
            border-radius: 20px;
        }
        .slide-result {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .slide-result:hover {
            background-color: var(--bs-primary-bg-subtle) !important;
            transform: translateY(-2px);
        }
        /* Different slide themes */
        .slide-theme-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .slide-theme-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .slide-theme-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .slide-theme-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .slide-theme-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    </style>
</head>
<body>
    <!-- Search Button -->
    <button class="search-btn" onclick="openSearch()">
        <i class="bi bi-search me-2"></i>Search Slides
    </button>

    <!-- Slide Indicator -->
    <div class="slide-indicator">
        <span id="slideCounter">1 / 5</span>
    </div>

    <!-- Slides Container -->
    <div class="container-fluid p-0">
        <!-- Slide 1 -->
        <div class="slide active slide-theme-1" data-title="Welcome to Our Presentation" data-tags="introduction,welcome,overview">
            <h1>Welcome to Our Presentation</h1>
            <p>This is an interactive slide presentation with integrated search functionality. You can navigate through slides using the controls below or search for specific content using the search button above.</p>
            <div class="slide-image-placeholder">
                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.5);">
                    <i class="bi bi-image fs-1"></i>
                </div>
            </div>
        </div>

        <!-- Slide 2 -->
        <div class="slide slide-theme-2" data-title="Features Overview" data-tags="features,functionality,capabilities">
            <h1>Key Features</h1>
            <p>Our presentation system includes searchable content, smooth navigation, responsive design, and customizable themes. Each slide can contain rich content including text, images, and interactive elements.</p>
            <div class="slide-image-placeholder">
                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.5);">
                    <i class="bi bi-gear fs-1"></i>
                </div>
            </div>
        </div>

        <!-- Slide 3 -->
        <div class="slide slide-theme-3" data-title="Search Integration" data-tags="search,pagefind,integration,technology">
            <h1>Search Integration</h1>
            <p>Powered by Pagefind search technology, you can quickly find and navigate to any slide by searching for keywords, titles, or content. The search is fast, accurate, and works offline.</p>
            <div class="slide-image-placeholder">
                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.5);">
                    <i class="bi bi-search fs-1"></i>
                </div>
            </div>
        </div>

        <!-- Slide 4 -->
        <div class="slide slide-theme-4" data-title="Bootstrap Design" data-tags="bootstrap,design,responsive,mobile">
            <h1>Bootstrap Design</h1>
            <p>Built with Bootstrap 5 for maximum compatibility and responsiveness. The design adapts seamlessly to different screen sizes and devices, ensuring a great experience on desktop, tablet, and mobile.</p>
            <div class="slide-image-placeholder">
                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.5);">
                    <i class="bi bi-phone fs-1"></i>
                </div>
            </div>
        </div>

        <!-- Slide 5 -->
        <div class="slide slide-theme-5" data-title="Thank You" data-tags="conclusion,thanks,contact,end">
            <h1>Thank You!</h1>
            <p>Thanks for exploring our searchable slide presentation. We hope you found the integration of search functionality with traditional slide navigation both useful and intuitive. Feel free to experiment with the search feature!</p>
            <div class="slide-image-placeholder">
                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed rgba(255,255,255,0.5);">
                    <i class="bi bi-heart fs-1"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide Controls -->
    <div class="slide-controls">
        <div class="slide-nav d-flex align-items-center">
            <button class="btn btn-link text-dark p-2" onclick="previousSlide()">
                <i class="bi bi-chevron-left fs-4"></i>
            </button>
            <div class="mx-3">
                <div class="d-flex gap-2" id="slideIndicators"></div>
            </div>
            <button class="btn btn-link text-dark p-2" onclick="nextSlide()">
                <i class="bi bi-chevron-right fs-4"></i>
            </button>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title text-primary fw-semibold" id="searchModalLabel">
                        <i class="bi bi-search me-2"></i>Search Slides
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-2">
                    <div class="mb-3">
                        <input type="text" class="form-control form-control-lg border-primary" id="searchInput" 
                               placeholder="Search slides by title, content, or tags..." oninput="performSlideSearch()">
                    </div>
                    <div id="searchResults" class="search-results" style="max-height: 400px; overflow-y: auto">
                        <!-- Results will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentSlide = 0;
        let slides = [];
        let slideData = [];

        // Initialize slides
        document.addEventListener('DOMContentLoaded', () => {
            slides = document.querySelectorAll('.slide');
            
            // Build slide data for search
            slides.forEach((slide, index) => {
                const title = slide.getAttribute('data-title') || `Slide ${index + 1}`;
                const tags = slide.getAttribute('data-tags') || '';
                const content = slide.querySelector('p')?.textContent || '';
                
                slideData.push({
                    index: index,
                    title: title,
                    content: content,
                    tags: tags.split(',').map(tag => tag.trim()),
                    element: slide
                });
            });
            
            createSlideIndicators();
            updateSlideCounter();
            showEmptySearchState();
        });

        function createSlideIndicators() {
            const container = document.getElementById('slideIndicators');
            container.innerHTML = '';
            
            slides.forEach((slide, index) => {
                const indicator = document.createElement('div');
                indicator.className = `indicator rounded-circle ${index === currentSlide ? 'bg-primary' : 'bg-secondary'}`;
                indicator.style.width = '12px';
                indicator.style.height = '12px';
                indicator.style.cursor = 'pointer';
                indicator.addEventListener('click', () => goToSlide(index));
                container.appendChild(indicator);
            });
        }

        function updateSlideIndicators() {
            const indicators = document.querySelectorAll('.indicator');
            indicators.forEach((indicator, index) => {
                indicator.className = `indicator rounded-circle ${index === currentSlide ? 'bg-primary' : 'bg-secondary'}`;
                indicator.style.width = '12px';
                indicator.style.height = '12px';
            });
        }

        function updateSlideCounter() {
            document.getElementById('slideCounter').textContent = `${currentSlide + 1} / ${slides.length}`;
        }

        function goToSlide(index) {
            if (index < 0 || index >= slides.length) return;
            
            slides[currentSlide].classList.remove('active');
            currentSlide = index;
            slides[currentSlide].classList.add('active');
            
            updateSlideIndicators();
            updateSlideCounter();
        }

        function nextSlide() {
            goToSlide((currentSlide + 1) % slides.length);
        }

        function previousSlide() {
            goToSlide(currentSlide === 0 ? slides.length - 1 : currentSlide - 1);
        }

        function openSearch() {
            const modal = new bootstrap.Modal(document.getElementById('searchModal'));
            modal.show();
            setTimeout(() => {
                document.getElementById('searchInput').focus();
            }, 300);
        }

        function showEmptySearchState() {
            const resultsEl = document.getElementById('searchResults');
            resultsEl.innerHTML = `
                <div class="text-muted text-center py-4">
                    <i class="bi bi-search fs-1 d-block mb-3"></i>
                    Start typing to search slides...
                </div>`;
        }

        function performSlideSearch() {
            const input = document.getElementById('searchInput');
            const resultsEl = document.getElementById('searchResults');
            const query = (input?.value || '').trim().toLowerCase();

            if (query.length < 2) {
                showEmptySearchState();
                return;
            }

            // Search through slide data
            const results = slideData.filter(slide => {
                const titleMatch = slide.title.toLowerCase().includes(query);
                const contentMatch = slide.content.toLowerCase().includes(query);
                const tagMatch = slide.tags.some(tag => tag.toLowerCase().includes(query));
                return titleMatch || contentMatch || tagMatch;
            });

            if (!results.length) {
                resultsEl.innerHTML = `
                    <div class="alert alert-warning mb-0" role="alert">
                        No slides found for "<strong>${escapeHtml(input.value)}</strong>"
                    </div>`;
                return;
            }

            let html = '<div class="list-group">';
            results.forEach(slide => {
                const badges = slide.tags.length
                    ? slide.tags.map(tag => `<span class="badge rounded-pill text-bg-primary me-1 mb-1">${escapeHtml(tag)}</span>`).join('')
                    : '';

                const preview = truncateText(slide.content, 120);

                html += `
                    <div class="slide-result list-group-item list-group-item-action border-0 rounded-3 mb-2 p-3" 
                         onclick="goToSlideFromSearch(${slide.index})" style="cursor: pointer;">
                        <div class="d-flex justify-content-between align-items-start">
                            <div class="flex-grow-1">
                                <div class="mb-2">${badges}</div>
                                <h6 class="mb-1 text-primary">${escapeHtml(slide.title)}</h6>
                                <p class="mb-0 small text-secondary">${escapeHtml(preview)}</p>
                                <small class="text-muted">Slide ${slide.index + 1}</small>
                            </div>
                            <div class="text-primary ms-3">
                                <i class="bi bi-arrow-right fs-5"></i>
                            </div>
                        </div>
                    </div>`;
            });
            html += '</div>';
            resultsEl.innerHTML = html;
        }

        function goToSlideFromSearch(index) {
            // Close the search modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('searchModal'));
            modal.hide();
            
            // Navigate to the slide
            setTimeout(() => {
                goToSlide(index);
            }, 300);
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            };
            return (text || '').replace(/[&<>"']/g, m => map[m]);
        }

        function truncateText(text, maxLength = 140) {
            const t = (text || '').trim();
            return t.length > maxLength ? t.slice(0, maxLength).trim() + 'â€¦' : t;
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') nextSlide();
            else if (e.key === 'ArrowLeft') previousSlide();
            else if (e.key === '/' || (e.ctrlKey && e.key === 'f')) {
                e.preventDefault();
                openSearch();
            }
            else if (e.key === 'Escape') {
                const modal = bootstrap.Modal.getInstance(document.getElementById('searchModal'));
                if (modal) modal.hide();
            }
        });
    </script>
</body>
</html>
